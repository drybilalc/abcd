<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
<title>WBC 2026 Â· AR Viewer</title>
<script src="https://cdn.jsdelivr.net/npm/mind-ar@1.2.5/dist/mindar-image.prod.js"></script>
<script src="https://aframe.io/releases/1.4.0/aframe.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/mind-ar@1.2.5/dist/mindar-image-aframe.prod.js"></script>
<style>
  * { margin:0; padding:0; box-sizing:border-box; }
  body { background:#000; overflow:hidden; font-family:'Segoe UI',sans-serif; }

  /* A-Frame canvas */
  a-scene { width:100vw; height:100vh; display:block; }

  /* â”€â”€ Video overlay â€” bu HTML videosu AR Ã¼stÃ¼ne binecek â”€â”€ */
  #video-overlay {
    display: none;
    position: fixed;
    inset: 0;
    z-index: 500;
    background: rgba(0,0,0,0.0);
    align-items: center;
    justify-content: center;
    pointer-events: none;
  }
  #video-overlay.active { display: flex; }

  #overlay-video {
    width: 85vw;
    max-width: 480px;
    border-radius: 12px;
    border: 3px solid #e8b84b;
    box-shadow: 0 0 40px rgba(201,151,58,0.5);
  }

  #overlay-label {
    position: fixed;
    top: 70px; left: 50%;
    transform: translateX(-50%);
    z-index: 501;
    background: rgba(8,25,47,0.9);
    color: #e8b84b;
    font-size: .85rem;
    font-weight: 700;
    padding: 7px 18px;
    border-radius: 20px;
    border: 1px solid #c9973a;
    display: none;
    white-space: nowrap;
  }
  #overlay-label.active { display: block; }

  /* â”€â”€ Splash â”€â”€ */
  #splash {
    position:fixed; inset:0; z-index:9999;
    background:linear-gradient(160deg,#08192f,#0a3d3a);
    display:flex; flex-direction:column;
    align-items:center; justify-content:center; gap:18px;
    transition:opacity .6s;
  }
  #splash.out { opacity:0; pointer-events:none; }
  .sp-logo { font-size:2.2rem; font-weight:900; color:#e8b84b; }
  .sp-logo span { color:#22a99a; }
  .sp-sub { font-size:.85rem; color:#8899bb; text-align:center; padding:0 30px; }
  .sp-spinner {
    width:48px; height:48px;
    border:3px solid rgba(201,151,58,.2);
    border-top-color:#c9973a;
    border-radius:50%;
    animation:spin 1s linear infinite;
  }
  @keyframes spin { to { transform:rotate(360deg); } }
  .sp-hint { font-size:.72rem; color:#334; text-align:center; padding:0 30px; }

  /* â”€â”€ Top bar â”€â”€ */
  #topbar {
    position:fixed; top:0; left:0; right:0; z-index:600;
    background:rgba(8,25,47,.85); backdrop-filter:blur(10px);
    display:flex; align-items:center; justify-content:space-between;
    padding:10px 16px; border-bottom:1px solid rgba(201,151,58,.3);
  }
  .tb-title { font-size:.85rem; font-weight:700; color:#e8b84b; }
  .tb-sub { font-size:.65rem; color:#6688aa; margin-top:1px; }
  .tb-badge {
    background:rgba(26,127,116,.25); border:1px solid #22a99a;
    color:#22a99a; font-size:.7rem; font-weight:600;
    padding:4px 10px; border-radius:20px;
    display:flex; align-items:center; gap:5px;
  }
  .dot { width:6px; height:6px; background:#22a99a; border-radius:50%; animation:blink 1.4s ease infinite; }
  @keyframes blink { 0%,100%{opacity:1} 50%{opacity:.15} }

  /* â”€â”€ Instructions â”€â”€ */
  #instr {
    position:fixed; bottom:0; left:0; right:0; z-index:600;
    background:linear-gradient(transparent, rgba(8,25,47,.97) 30%);
    padding:50px 20px 24px;
    transition:opacity .4s;
  }
  #instr.hide { opacity:0; pointer-events:none; }
  .inst-title { font-size:.8rem; font-weight:700; color:#e8b84b; margin-bottom:8px; }
  .inst-row { display:flex; align-items:center; gap:10px; margin-bottom:7px; font-size:.8rem; color:#99bbcc; }
  .inst-row .n {
    background:#c9973a; color:#08192f;
    width:22px; height:22px; border-radius:50%;
    display:flex; align-items:center; justify-content:center;
    font-size:.75rem; font-weight:700; flex-shrink:0;
  }
  .pills { display:flex; gap:8px; margin-bottom:12px; flex-wrap:wrap; }
  .pill {
    display:flex; align-items:center; gap:6px;
    background:rgba(255,255,255,.07); border:1px solid rgba(255,255,255,.12);
    padding:5px 10px; border-radius:8px; font-size:.75rem; color:#ccd;
  }
  .pd { width:8px; height:8px; border-radius:50%; flex-shrink:0; }
</style>
</head>
<body>

<!-- Splash -->
<div id="splash">
  <div class="sp-logo">WBC <span>2026</span></div>
  <div class="sp-spinner"></div>
  <div class="sp-sub">AR engine yÃ¼kleniyorâ€¦<br>Posterdeki fotoÄŸraflara kamerayÄ± tut</div>
  <div class="sp-hint">âš ï¸ Kamera izni gerekli Â· Ä°nternet baÄŸlantÄ±sÄ± ÅŸart</div>
</div>

<!-- Top bar -->
<div id="topbar">
  <div>
    <div class="tb-title">WBC 2026 Â· AR Poster</div>
    <div class="tb-sub">Ovine Colostrum Quality â€” AI Assessment</div>
  </div>
  <div class="tb-badge"><div class="dot"></div>AR Live</div>
</div>

<!-- Video overlay â€” HTML video, A-Frame dÄ±ÅŸÄ±nda -->
<div id="video-overlay">
  <video id="overlay-video" playsinline webkit-playsinline muted loop></video>
</div>
<div id="overlay-label"></div>

<!-- Instructions -->
<div id="instr">
  <div class="inst-title">ğŸ“± NasÄ±l kullanÄ±lÄ±r</div>
  <div class="pills">
    <div class="pill"><div class="pd" style="background:#22a99a"></div>GÃ¶rsel 1 â†’ Kolostrum Toplama Videosu</div>
    <div class="pill"><div class="pd" style="background:#e8b84b"></div>GÃ¶rsel 2 â†’ Neonatal Besleme Videosu</div>
  </div>
  <div class="inst-row"><div class="n">1</div>Telefonu posterden 30â€“40 cm uzakta tut</div>
  <div class="inst-row"><div class="n">2</div>KamerayÄ± posterdeki fotoÄŸraflardan birine yÃ¶nelt</div>
  <div class="inst-row"><div class="n">3</div>Sabit tut â€” video otomatik baÅŸlar</div>
</div>

<!-- A-Frame (sadece AR tracking iÃ§in, video buradan oynatÄ±lmÄ±yor) -->
<a-scene
  mindar-image="imageTargetSrc: ./targets.mind; autoStart: true; uiLoading: no; uiError: no; uiScanning: no; filterMinCF: 0.001; filterBeta: 1000; warmupTolerance: 5; missTolerance: 5"
  color-space="sRGB"
  renderer="colorManagement: true"
  vr-mode-ui="enabled: false"
  device-orientation-permission-ui="enabled: false"
  embedded
>
  <a-camera position="0 0 0" look-controls="enabled:false"></a-camera>

  <!-- Tracker 0: GÃ¶rsel1.png -->
  <a-entity mindar-image-target="targetIndex: 0" id="t0">
    <a-box visible="false" width="0.1" height="0.1" depth="0.1"></a-box>
  </a-entity>

  <!-- Tracker 1: GÃ¶rsel2.png -->
  <a-entity mindar-image-target="targetIndex: 1" id="t1">
    <a-box visible="false" width="0.1" height="0.1" depth="0.1"></a-box>
  </a-entity>
</a-scene>

<script>
document.addEventListener('DOMContentLoaded', () => {
  const splash   = document.getElementById('splash');
  const instr    = document.getElementById('instr');
  const overlay  = document.getElementById('video-overlay');
  const ovVideo  = document.getElementById('overlay-video');
  const ovLabel  = document.getElementById('overlay-label');
  const scene    = document.querySelector('a-scene');
  const t0       = document.getElementById('t0');
  const t1       = document.getElementById('t1');

  // â”€â”€ Video kaynaklarÄ± â€” kendi repo adresinle deÄŸiÅŸtir â”€â”€
  const VIDEO1 = './video1.mp4';   // GÃ¶rsel1 trigger
  const VIDEO2 = './video2.mp4';   // GÃ¶rsel2 trigger

  function playVideo(src, label) {
    ovVideo.src = src;
    ovVideo.load();
    ovVideo.play().catch(e => console.warn('play error:', e));
    overlay.classList.add('active');
    ovLabel.textContent = 'ğŸ“¹ ' + label;
    ovLabel.classList.add('active');
    instr.classList.add('hide');
  }

  function stopVideo() {
    ovVideo.pause();
    ovVideo.src = '';
    overlay.classList.remove('active');
    ovLabel.classList.remove('active');
    instr.classList.remove('hide');
  }

  // AR ready
  scene.addEventListener('arReady', () => {
    splash.classList.add('out');
  });
  scene.addEventListener('arError', () => {
    splash.querySelector('.sp-sub').textContent = 'âš ï¸ AR baÅŸlatÄ±lamadÄ±. Kamera iznini kontrol et.';
    splash.querySelector('.sp-spinner').style.display = 'none';
  });
  setTimeout(() => splash.classList.add('out'), 10000);

  // â”€â”€ Target 0: SaÄŸÄ±m fotoÄŸrafÄ± â”€â”€
  t0.addEventListener('targetFound', () => playVideo(VIDEO1, 'Kolostrum Toplama â€” WBC 2026'));
  t0.addEventListener('targetLost',  stopVideo);

  // â”€â”€ Target 1: Kuzu fotoÄŸrafÄ± â”€â”€
  t1.addEventListener('targetFound', () => playVideo(VIDEO2, 'Neonatal Besleme â€” WBC 2026'));
  t1.addEventListener('targetLost',  stopVideo);
});
</script>

</body>
</html>
